<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thenux-AI Music Player</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @keyframes foldIn {
            0% { transform: rotateX(0deg); opacity: 1; }
            100% { transform: rotateX(90deg); opacity: 0; }
        }
        
        @keyframes foldOut {
            0% { transform: rotateX(90deg); opacity: 0; }
            100% { transform: rotateX(0deg); opacity: 1; }
        }
        
        .fold-in {
            animation: foldIn 0.5s forwards;
        }
        
        .fold-out {
            animation: foldOut 0.5s forwards;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #6e8efb, #a777e3);
        }
        
        .dark .gradient-bg {
            background: linear-gradient(135deg, #1a1a2e, #16213e);
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.18);
        }
        
        .dark .glass-effect {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .wave-animation {
            position: relative;
            overflow: hidden;
        }
        
        .wave-animation::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            animation: wave 2s linear infinite;
            transform: translateX(-100%);
        }
        
        .dark .wave-animation::after {
            background: linear-gradient(90deg, transparent, rgba(0,0,0,0.2), transparent);
        }
        
        @keyframes wave {
            100% {
                transform: translateX(100%);
            }
        }
        
        .album-art {
            transition: all 0.3s ease;
            box-shadow: 0 20px 30px rgba(0,0,0,0.2);
        }
        
        .album-art:hover {
            transform: scale(1.05) rotate(2deg);
        }
        
        .progress-bar {
            height: 6px;
            background: rgba(255,255,255,0.3);
            border-radius: 3px;
        }
        
        .dark .progress-bar {
            background: rgba(255,255,255,0.1);
        }
        
        .progress-fill {
            height: 100%;
            background: white;
            border-radius: 3px;
            transition: width 0.1s linear;
        }
        
        .dark .progress-fill {
            background: #a777e3;
        }
        
        .song-item:hover {
            transform: translateX(10px);
            background: rgba(255,255,255,0.1);
        }
        
        .dark .song-item:hover {
            background: rgba(255,255,255,0.05);
        }
        
        .song-item {
            transition: all 0.3s ease;
        }
        
        .floating-player {
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
            transform-style: preserve-3d;
            perspective: 1000px;
        }
        
        .dark .floating-player {
            box-shadow: 0 15px 35px rgba(0,0,0,0.4);
        }
        
        .rotate-3d {
            transform: rotateY(10deg);
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
            100% {
                transform: scale(1);
            }
        }
        
        /* New animations */
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }
        
        .float-animation {
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes glow {
            0% { box-shadow: 0 0 5px rgba(255,255,255,0.5); }
            50% { box-shadow: 0 0 20px rgba(255,255,255,0.8); }
            100% { box-shadow: 0 0 5px rgba(255,255,255,0.5); }
        }
        
        .dark .glow-animation {
            animation: glow 2s infinite alternate;
        }
        
        .glow-animation {
            animation: glow 2s infinite;
        }
        
        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .rotate-animation {
            animation: rotate 10s linear infinite;
        }
        
        .text-gradient {
            background: linear-gradient(90deg, #ff8a00, #e52e71);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .hover-scale {
            transition: transform 0.3s ease;
        }
        
        .hover-scale:hover {
            transform: scale(1.1);
        }
        
        /* Dark mode toggle */
        .toggle-checkbox:checked {
            right: 0;
            border-color: #a777e3;
        }
        
        .toggle-checkbox:checked + .toggle-label {
            background-color: #a777e3;
        }
        
        /* Playlist styles */
        .playlist-item {
            transition: all 0.2s ease;
        }
        
        .playlist-item:hover {
            background: rgba(255,255,255,0.1);
        }
        
        .dark .playlist-item:hover {
            background: rgba(255,255,255,0.05);
        }
        
        .playlist-item.active {
            background: rgba(255,255,255,0.2);
        }
        
        .dark .playlist-item.active {
            background: rgba(255,255,255,0.1);
        }
        
        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: rgba(255,255,255,0.3);
            border-radius: 10px;
        }
        
        .dark ::-webkit-scrollbar-thumb {
            background: rgba(255,255,255,0.2);
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: rgba(255,255,255,0.4);
        }
        
        /* Modal styles */
        .modal {
            transition: opacity 0.3s ease, transform 0.3s ease;
        }
        
        .modal-enter {
            opacity: 0;
            transform: scale(0.9);
        }
        
        .modal-enter-active {
            opacity: 1;
            transform: scale(1);
        }
        
        .modal-exit {
            opacity: 1;
            transform: scale(1);
        }
        
        .modal-exit-active {
            opacity: 0;
            transform: scale(0.9);
        }

          /* Mobile-specific styles */
        @media (max-width: 768px) {
            .mobile-hidden {
                display: none;
            }
            
            .mobile-player {
                position: fixed;
                bottom: 0;
                left: 0;
                right: 0;
                background: linear-gradient(135deg, #6e8efb, #a777e3);
                padding: 1rem;
                box-shadow: 0 -5px 15px rgba(0,0,0,0.2);
                z-index: 100;
            }
            
            .mobile-player.dark {
                background: linear-gradient(135deg, #1a1a2e, #16213e);
            }
            
            .mobile-player-content {
                display: flex;
                align-items: center;
                gap: 1rem;
            }
            
            .mobile-album-art {
                width: 50px;
                height: 50px;
                border-radius: 8px;
                overflow: hidden;
                flex-shrink: 0;
            }
            
            .mobile-player-info {
                flex-grow: 1;
                min-width: 0;
            }
            
            .mobile-player-title {
                font-weight: 600;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
                font-size: 0.9rem;
            }
            
            .mobile-player-artist {
                font-size: 0.8rem;
                opacity: 0.8;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
            }
            
            .mobile-player-controls {
                display: flex;
                gap: 0.5rem;
            }
            
            .mobile-player-btn {
                width: 40px;
                height: 40px;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                background: rgba(255,255,255,0.2);
                transition: all 0.2s ease;
            }
            
            .mobile-player-btn:hover {
                background: rgba(255,255,255,0.3);
                transform: scale(1.05);
            }
            
            .mobile-player-btn i {
                font-size: 1rem;
            }
            
            .main-content {
                padding-bottom: 80px; /* Space for mobile player */
            }
            
            .floating-player {
                position: relative;
                top: auto;
                margin-bottom: 1rem;
            }
            
            header {
                flex-direction: column;
                gap: 1rem;
                padding: 1rem;
            }
            
            .header-buttons {
                width: 100%;
                justify-content: space-between;
            }
        }
    </style>
</head>
    <body class="gradient-bg min-h-screen text-white font-sans transition-colors duration-300">
    <div class="container mx-auto px-4 py-8 main-content">
<body class="gradient-bg min-h-screen text-white font-sans transition-colors duration-300">
    <div class="container mx-auto px-4 py-8">
        <header class="flex justify-between items-center mb-10 glass-effect rounded-2xl p-6">
            <div class="flex items-center space-x-3">
                <div class="w-12 h-12 bg-white rounded-full flex items-center justify-center text-purple-600 text-2xl font-bold hover-scale dark:bg-gray-800 dark:text-purple-300">
                    T
                </div>
                <h1 class="text-3xl font-bold">Thenux<span class="text-yellow-300">-AI</span></h1>
            </div>
            <div class="flex items-center space-x-4">
                <div class="flex items-center mr-4">
                    <span class="mr-2 text-sm hidden sm:inline"><i class="fas fa-moon"></i></span>
                    <div class="relative inline-block w-12 mr-2 align-middle select-none">
                        <input type="checkbox" id="darkModeToggle" class="toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"/>
                        <label for="darkModeToggle" class="toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"></label>
                    </div>
                    <span class="text-sm hidden sm:inline"><i class="fas fa-sun"></i></span>
                </div>
                <button class="bg-white text-purple-600 px-6 py-2 rounded-full font-medium hover:bg-purple-100 transition hover-scale dark:bg-gray-800 dark:text-purple-300 dark:hover:bg-gray-700">
                    Sign In
                </button>
                <button class="glass-effect px-6 py-2 rounded-full font-medium hover:bg-white hover:bg-opacity-10 transition hover-scale dark:hover:bg-black dark:hover:bg-opacity-20">
                    Register
                </button>
            </div>
        </header>

        <main class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <div class="lg:col-span-2">
                <div class="glass-effect rounded-2xl p-6 mb-8 wave-animation">
                    <div class="flex items-center mb-6">
                        <div class="relative flex-grow">
                            <input type="text" id="searchInput" placeholder="Search for songs, artists..." 
                                   class="w-full bg-white bg-opacity-20 rounded-full py-3 px-6 text-white placeholder-white placeholder-opacity-70 focus:outline-none focus:ring-2 focus:ring-white focus:ring-opacity-50 dark:bg-black dark:bg-opacity-30 dark:focus:ring-purple-500">
                            <button id="searchBtn" class="absolute right-3 top-1/2 transform -translate-y-1/2 bg-white bg-opacity-20 p-2 rounded-full hover:bg-opacity-30 transition hover-scale dark:bg-black dark:bg-opacity-30">
                                <i class="fas fa-search"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="flex space-x-4 overflow-x-auto pb-4">
                        <button class="bg-white bg-opacity-20 hover:bg-opacity-30 px-4 py-1 rounded-full whitespace-nowrap transition hover-scale dark:bg-black dark:bg-opacity-30 dark:hover:bg-opacity-40">All</button>
                        <button class="bg-white bg-opacity-10 hover:bg-opacity-20 px-4 py-1 rounded-full whitespace-nowrap transition hover-scale dark:bg-black dark:bg-opacity-20 dark:hover:bg-opacity-30">Pop</button>
                        <button class="bg-white bg-opacity-10 hover:bg-opacity-20 px-4 py-1 rounded-full whitespace-nowrap transition hover-scale dark:bg-black dark:bg-opacity-20 dark:hover:bg-opacity-30">Rock</button>
                        <button class="bg-white bg-opacity-10 hover:bg-opacity-20 px-4 py-1 rounded-full whitespace-nowrap transition hover-scale dark:bg-black dark:bg-opacity-20 dark:hover:bg-opacity-30">Hip Hop</button>
                        <button class="bg-white bg-opacity-10 hover:bg-opacity-20 px-4 py-1 rounded-full whitespace-nowrap transition hover-scale dark:bg-black dark:bg-opacity-20 dark:hover:bg-opacity-30">Electronic</button>
                        <button class="bg-white bg-opacity-10 hover:bg-opacity-20 px-4 py-1 rounded-full whitespace-nowrap transition hover-scale dark:bg-black dark:bg-opacity-20 dark:hover:bg-opacity-30">Jazz</button>
                        <button class="bg-white bg-opacity-10 hover:bg-opacity-20 px-4 py-1 rounded-full whitespace-nowrap transition hover-scale dark:bg-black dark:bg-opacity-20 dark:hover:bg-opacity-30">Classical</button>
                    </div>
                </div>
                
                <div class="flex space-x-4 mb-8">
                    <button id="showSearchResults" class="glass-effect px-6 py-2 rounded-full font-medium hover:bg-white hover:bg-opacity-10 transition hover-scale dark:hover:bg-black dark:hover:bg-opacity-20 active">Search Results</button>
                    <button id="showPlaylists" class="glass-effect px-6 py-2 rounded-full font-medium hover:bg-white hover:bg-opacity-10 transition hover-scale dark:hover:bg-black dark:hover:bg-opacity-20">My Playlists</button>
                    <button id="createPlaylistBtn" class="glass-effect px-6 py-2 rounded-full font-medium hover:bg-white hover:bg-opacity-10 transition hover-scale dark:hover:bg-black dark:hover:bg-opacity-20 ml-auto">
                        <i class="fas fa-plus mr-2"></i>New Playlist
                    </button>
                </div>
                
                <div id="searchResults" class="glass-effect rounded-2xl p-6 fold-out">
                    <h2 class="text-xl font-bold mb-6">Search Results</h2>
                    <div id="resultsContainer" class="space-y-3">
                        <div class="text-center py-10">
                            <i class="fas fa-music text-4xl opacity-30 mb-4 float-animation"></i>
                            <p class="opacity-70">Search for music to get started</p>
                        </div>
                    </div>
                </div>
                
                <div id="playlistsContainer" class="glass-effect rounded-2xl p-6 hidden">
                    <h2 class="text-xl font-bold mb-6">My Playlists</h2>
                    <div id="playlistsList" class="space-y-3">
                        <div class="playlist-item glass-effect rounded-xl p-4 flex items-center space-x-4 cursor-pointer active">
                            <div class="w-12 h-12 bg-white bg-opacity-10 rounded-lg flex-shrink-0 flex items-center justify-center text-purple-400 dark:bg-black dark:bg-opacity-30">
                                <i class="fas fa-music"></i>
                            </div>
                            <div class="flex-grow">
                                <h3 class="font-medium">Favorites</h3>
                                <p class="text-sm text-white text-opacity-60">12 songs</p>
                            </div>
                            <button class="playlist-play-btn text-white text-opacity-60 hover:text-purple-400 transition">
                                <i class="fas fa-play"></i>
                            </button>
                        </div>
                        <div class="playlist-item glass-effect rounded-xl p-4 flex items-center space-x-4 cursor-pointer">
                            <div class="w-12 h-12 bg-white bg-opacity-10 rounded-lg flex-shrink-0 flex items-center justify-center text-purple-400 dark:bg-black dark:bg-opacity-30">
                                <i class="fas fa-heart"></i>
                            </div>
                            <div class="flex-grow">
                                <h3 class="font-medium">Liked Songs</h3>
                                <p class="text-sm text-white text-opacity-60">45 songs</p>
                            </div>
                            <button class="playlist-play-btn text-white text-opacity-60 hover:text-purple-400 transition">
                                <i class="fas fa-play"></i>
                            </button>
                        </div>
                        <div class="playlist-item glass-effect rounded-xl p-4 flex items-center space-x-4 cursor-pointer">
                            <div class="w-12 h-12 bg-white bg-opacity-10 rounded-lg flex-shrink-0 flex items-center justify-center text-purple-400 dark:bg-black dark:bg-opacity-30">
                                <i class="fas fa-running"></i>
                            </div>
                            <div class="flex-grow">
                                <h3 class="font-medium">Workout Mix</h3>
                                <p class="text-sm text-white text-opacity-60">25 songs</p>
                            </div>
                            <button class="playlist-play-btn text-white text-opacity-60 hover:text-purple-400 transition">
                                <i class="fas fa-play"></i>
                            </button>
                        </div>
                    </div>
                </div>
                
                <div id="playlistSongsContainer" class="glass-effect rounded-2xl p-6 mt-4 hidden">
                    <div class="flex items-center justify-between mb-6">
                        <h2 class="text-xl font-bold">Favorites</h2>
                        <button id="backToPlaylists" class="text-sm text-white text-opacity-70 hover:text-opacity-100 transition">
                            <i class="fas fa-arrow-left mr-2"></i>Back to playlists
                        </button>
                    </div>
                    <div id="playlistSongsList" class="space-y-3">
                        <!-- Playlist songs will be loaded here -->
                        <div class="song-item glass-effect rounded-xl p-4 flex items-center space-x-4 cursor-pointer">
                            <div class="w-12 h-12 bg-white bg-opacity-10 rounded-lg flex-shrink-0 overflow-hidden">
                                <img src="https://i.scdn.co/image/ab67616d0000b273c4d00cac55ae1b4598c9bc90" class="w-full h-full object-cover">
                            </div>
                            <div class="flex-grow">
                                <h3 class="font-medium truncate">Blinding Lights</h3>
                                <p class="text-sm text-white text-opacity-60 truncate">The Weeknd</p>
                            </div>
                            <div class="text-white text-opacity-60">
                                3:20
                            </div>
                        </div>
                        <div class="song-item glass-effect rounded-xl p-4 flex items-center space-x-4 cursor-pointer">
                            <div class="w-12 h-12 bg-white bg-opacity-10 rounded-lg flex-shrink-0 overflow-hidden">
                                <img src="https://i.scdn.co/image/ab67616d0000b2738538e1a5211e2a9abf8e1b2a" class="w-full h-full object-cover">
                            </div>
                            <div class="flex-grow">
                                <h3 class="font-medium truncate">Save Your Tears</h3>
                                <p class="text-sm text-white text-opacity-60 truncate">The Weeknd</p>
                            </div>
                            <div class="text-white text-opacity-60">
                                3:35
                            </div>
                        </div>
                        <div class="song-item glass-effect rounded-xl p-4 flex items-center space-x-4 cursor-pointer">
                            <div class="w-12 h-12 bg-white bg-opacity-10 rounded-lg flex-shrink-0 overflow-hidden">
                                <img src="https://i.scdn.co/image/ab67616d0000b273de437d960dda1ac0a3586d97" class="w-full h-full object-cover">
                            </div>
                            <div class="flex-grow">
                                <h3 class="font-medium truncate">Starboy</h3>
                                <p class="text-sm text-white text-opacity-60 truncate">The Weeknd, Daft Punk</p>
                            </div>
                            <div class="text-white text-opacity-60">
                                3:50
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="lg:col-span-1">
                <div class="floating-player glass-effect rounded-2xl p-6 sticky top-6 rotate-3d glow-animation">
                    <div class="flex flex-col items-center mb-6">
                        <div class="album-art w-48 h-48 bg-white bg-opacity-10 rounded-xl mb-6 flex items-center justify-center overflow-hidden">
                            <img id="currentAlbumArt" src="https://i.scdn.co/image/ab67616d0000b273c4d00cac55ae1b4598c9bc90" alt="Album Art" class="w-full h-full object-cover">
                        </div>
                        <h2 id="currentSongTitle" class="text-xl font-bold text-center">No song selected</h2>
                        <p id="currentArtist" class="text-white text-opacity-70">Search and select a song</p>
                    </div>
                    
                    <div class="mb-4">
                        <div class="progress-bar">
                            <div id="progressFill" class="progress-fill" style="width: 0%"></div>
                        </div>
                        <div class="flex justify-between text-xs mt-1">
                            <span id="currentTime">0:00</span>
                            <span id="duration">0:00</span>
                        </div>
                    </div>
                    
                    <div class="flex justify-center items-center space-x-6 mb-6">
                        <button class="text-2xl hover:text-yellow-300 transition hover-scale"><i class="fas fa-step-backward"></i></button>
                        <button id="playPauseBtn" class="bg-white text-purple-600 w-12 h-12 rounded-full flex items-center justify-center text-2xl hover:bg-purple-100 transition hover-scale dark:bg-gray-800 dark:text-purple-300 dark:hover:bg-gray-700">
                            <i class="fas fa-play"></i>
                        </button>
                        <button class="text-2xl hover:text-yellow-300 transition hover-scale"><i class="fas fa-step-forward"></i></button>
                    </div>
                    
                    <div class="flex justify-between items-center">
                        <button class="hover:text-yellow-300 transition hover-scale"><i class="fas fa-volume-up"></i></button>
                        <div class="flex space-x-3">
                            <button class="hover:text-yellow-300 transition hover-scale"><i class="fas fa-random"></i></button>
                            <button class="hover:text-yellow-300 transition hover-scale"><i class="fas fa-redo"></i></button>
                            <button id="addToPlaylistBtn" class="hover:text-yellow-300 transition hover-scale"><i class="fas fa-plus"></i></button>
                        </div>
                    </div>
                </div>
            </div>
        </main>

         <div id="mobilePlayer" class="mobile-player mobile-hidden">
            <div class="mobile-player-content">
                <div class="mobile-album-art">
                    <img id="mobileAlbumArt" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%23a777e3'/%3E%3Ctext x='50%' y='50%' font-size='40' text-anchor='middle' dominant-baseline='middle' fill='white'%3EðŸŽµ%3C/text%3E%3C/svg%3E" alt="Album Art">
                </div>
                <div class="mobile-player-info">
                    <div id="mobileSongTitle" class="mobile-player-title">No song playing</div>
                    <div id="mobileSongArtist" class="mobile-player-artist">Select a song</div>
                </div>
                <div class="mobile-player-controls">
                    <button id="mobilePlayPauseBtn" class="mobile-player-btn">
                        <i class="fas fa-play"></i>
                    </button>
                    <button id="mobileNextBtn" class="mobile-player-btn">
                        <i class="fas fa-step-forward"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

        
        <div class="glass-effect rounded-2xl p-6 mt-8">
            <h2 class="text-xl font-bold mb-6">Recently Played</h2>
            <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4">
                <div class="song-item bg-white bg-opacity-10 rounded-xl p-4 cursor-pointer hover:bg-opacity-20 transition dark:bg-black dark:bg-opacity-30 dark:hover:bg-opacity-40">
                    <div class="w-full aspect-square bg-white bg-opacity-10 rounded-lg mb-3 overflow-hidden dark:bg-black dark:bg-opacity-30">
                        <img src="https://i.scdn.co/image/ab67616d0000b273c4d00cac55ae1b4598c9bc90" class="w-full h-full object-cover">
                    </div>
                    <h3 class="font-medium truncate">Blinding Lights</h3>
                    <p class="text-xs text-white text-opacity-60 truncate">The Weeknd</p>
                </div>
                <div class="song-item bg-white bg-opacity-10 rounded-xl p-4 cursor-pointer hover:bg-opacity-20 transition dark:bg-black dark:bg-opacity-30 dark:hover:bg-opacity-40">
                    <div class="w-full aspect-square bg-white bg-opacity-10 rounded-lg mb-3 overflow-hidden dark:bg-black dark:bg-opacity-30">
                        <img src="https://i.scdn.co/image/ab67616d0000b2738538e1a5211e2a9abf8e1b2a" class="w-full h-full object-cover">
                    </div>
                    <h3 class="font-medium truncate">Save Your Tears</h3>
                    <p class="text-xs text-white text-opacity-60 truncate">The Weeknd</p>
                </div>
                <div class="song-item bg-white bg-opacity-10 rounded-xl p-4 cursor-pointer hover:bg-opacity-20 transition dark:bg-black dark:bg-opacity-30 dark:hover:bg-opacity-40">
                    <div class="w-full aspect-square bg-white bg-opacity-10 rounded-lg mb-3 overflow-hidden dark:bg-black dark:bg-opacity-30">
                        <img src="https://i.scdn.co/image/ab67616d0000b273de437d960dda1ac0a3586d97" class="w-full h-full object-cover">
                    </div>
                    <h3 class="font-medium truncate">Starboy</h3>
                    <p class="text-xs text-white text-opacity-60 truncate">The Weeknd, Daft Punk</p>
                </div>
                <div class="song-item bg-white bg-opacity-10 rounded-xl p-4 cursor-pointer hover:bg-opacity-20 transition dark:bg-black dark:bg-opacity-30 dark:hover:bg-opacity-40">
                    <div class="w-full aspect-square bg-white bg-opacity-10 rounded-lg mb-3 overflow-hidden dark:bg-black dark:bg-opacity-30">
                        <img src="https://i.scdn.co/image/ab67616d0000b273b254ca0983d65ede5e5a7b21" class="w-full h-full object-cover">
                    </div>
                    <h3 class="font-medium truncate">Levitating</h3>
                    <p class="text-xs text-white text-opacity-60 truncate">Dua Lipa</p>
                </div>
                <div class="song-item bg-white bg-opacity-10 rounded-xl p-4 cursor-pointer hover:bg-opacity-20 transition dark:bg-black dark:bg-opacity-30 dark:hover:bg-opacity-40">
                    <div class="w-full aspect-square bg-white bg-opacity-10 rounded-lg mb-3 overflow-hidden dark:bg-black dark:bg-opacity-30">
                        <img src="https://i.scdn.co/image/ab67616d0000b273f7db43292a6a99b21b51d5b4" class="w-full h-full object-cover">
                    </div>
                    <h3 class="font-medium truncate">Don't Start Now</h3>
                    <p class="text-xs text-white text-opacity-60 truncate">Dua Lipa</p>
                </div>
                <div class="song-item bg-white bg-opacity-10 rounded-xl p-4 cursor-pointer hover:bg-opacity-20 transition dark:bg-black dark:bg-opacity-30 dark:hover:bg-opacity-40">
                    <div class="w-full aspect-square bg-white bg-opacity-10 rounded-lg mb-3 overflow-hidden dark:bg-black dark:bg-opacity-30">
                        <img src="https://i.scdn.co/image/ab67616d0000b2734aeaaeeb0755f1d8a8b51738" class="w-full h-full object-cover">
                    </div>
                    <h3 class="font-medium truncate">Watermelon Sugar</h3>
                    <p class="text-xs text-white text-opacity-60 truncate">Harry Styles</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Add to Playlist Modal -->
    <div id="addToPlaylistModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="glass-effect rounded-2xl p-6 w-full max-w-md modal">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold">Add to Playlist</h3>
                <button id="closePlaylistModal" class="text-2xl hover:text-purple-400">&times;</button>
            </div>
            <div class="mb-4">
                <input type="text" id="newPlaylistName" placeholder="New playlist name" 
                       class="w-full bg-white bg-opacity-20 rounded-full py-2 px-4 text-white placeholder-white placeholder-opacity-70 focus:outline-none focus:ring-2 focus:ring-white focus:ring-opacity-50 dark:bg-black dark:bg-opacity-30">
            </div>
            <div class="max-h-60 overflow-y-auto mb-4">
                <div class="space-y-2">
                    <div class="flex items-center p-2 hover:bg-white hover:bg-opacity-10 rounded-lg cursor-pointer dark:hover:bg-black dark:hover:bg-opacity-20">
                        <input type="radio" name="playlist" id="playlist1" class="mr-3">
                        <label for="playlist1" class="flex-grow cursor-pointer">Favorites</label>
                    </div>
                    <div class="flex items-center p-2 hover:bg-white hover:bg-opacity-10 rounded-lg cursor-pointer dark:hover:bg-black dark:hover:bg-opacity-20">
                        <input type="radio" name="playlist" id="playlist2" class="mr-3">
                        <label for="playlist2" class="flex-grow cursor-pointer">Liked Songs</label>
                    </div>
                    <div class="flex items-center p-2 hover:bg-white hover:bg-opacity-10 rounded-lg cursor-pointer dark:hover:bg-black dark:hover:bg-opacity-20">
                        <input type="radio" name="playlist" id="playlist3" class="mr-3">
                        <label for="playlist3" class="flex-grow cursor-pointer">Workout Mix</label>
                    </div>
                </div>
            </div>
            <button id="confirmAddToPlaylist" class="w-full bg-purple-600 text-white py-2 rounded-full hover:bg-purple-700 transition">
                Add to Playlist
            </button>
        </div>
    </div>
    
    <!-- Create Playlist Modal -->
    <div id="createPlaylistModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="glass-effect rounded-2xl p-6 w-full max-w-md modal">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold">Create New Playlist</h3>
                <button id="closeCreateModal" class="text-2xl hover:text-purple-400">&times;</button>
            </div>
            <div class="mb-4">
                <input type="text" id="playlistNameInput" placeholder="Playlist name" 
                       class="w-full bg-white bg-opacity-20 rounded-full py-2 px-4 text-white placeholder-white placeholder-opacity-70 focus:outline-none focus:ring-2 focus:ring-white focus:ring-opacity-50 dark:bg-black dark:bg-opacity-30">
            </div>
            <div class="mb-4">
                <textarea id="playlistDescription" placeholder="Description (optional)" 
                          class="w-full bg-white bg-opacity-20 rounded-xl py-2 px-4 text-white placeholder-white placeholder-opacity-70 focus:outline-none focus:ring-2 focus:ring-white focus:ring-opacity-50 dark:bg-black dark:bg-opacity-30 h-24"></textarea>
            </div>
            <button id="confirmCreatePlaylist" class="w-full bg-purple-600 text-white py-2 rounded-full hover:bg-purple-700 transition">
                Create Playlist
            </button>
        </div>
    </div>
    
    <audio id="audioPlayer"></audio>
    
    <script>
        // DOM Elements
        const searchInput = document.getElementById('searchInput');
        const searchBtn = document.getElementById('searchBtn');
        const resultsContainer = document.getElementById('resultsContainer');
        const searchResults = document.getElementById('searchResults');
        const audioPlayer = document.getElementById('audioPlayer');
        const playPauseBtn = document.getElementById('playPauseBtn');
        const progressFill = document.getElementById('progressFill');
        const currentTime = document.getElementById('currentTime');
        const duration = document.getElementById('duration');
        const currentSongTitle = document.getElementById('currentSongTitle');
        const currentArtist = document.getElementById('currentArtist');
        const currentAlbumArt = document.getElementById('currentAlbumArt');
        const darkModeToggle = document.getElementById('darkModeToggle');
        const showSearchResults = document.getElementById('showSearchResults');
        const showPlaylists = document.getElementById('showPlaylists');
        const playlistsContainer = document.getElementById('playlistsContainer');
        const playlistSongsContainer = document.getElementById('playlistSongsContainer');
        const backToPlaylists = document.getElementById('backToPlaylists');
        const addToPlaylistBtn = document.getElementById('addToPlaylistBtn');
        const addToPlaylistModal = document.getElementById('addToPlaylistModal');
        const closePlaylistModal = document.getElementById('closePlaylistModal');
        const confirmAddToPlaylist = document.getElementById('confirmAddToPlaylist');
        const createPlaylistBtn = document.getElementById('createPlaylistBtn');
        const createPlaylistModal = document.getElementById('createPlaylistModal');
        const closeCreateModal = document.getElementById('closeCreateModal');
        const confirmCreatePlaylist = document.getElementById('confirmCreatePlaylist');
        
        // State
        let currentSong = null;
        let isPlaying = false;
        let darkMode = false;
        
        // Event Listeners
        searchBtn.addEventListener('click', searchMusic);
        searchInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchMusic();
            }
        });
        
        playPauseBtn.addEventListener('click', togglePlayPause);
        audioPlayer.addEventListener('timeupdate', updateProgress);
        audioPlayer.addEventListener('loadedmetadata', updateDuration);
        audioPlayer.addEventListener('ended', songEnded);
        
        // Dark mode toggle
        darkModeToggle.addEventListener('change', toggleDarkMode);
        
        // Playlist navigation
        showSearchResults.addEventListener('click', () => {
            showSearchResults.classList.add('active');
            showPlaylists.classList.remove('active');
            searchResults.classList.remove('hidden');
            playlistsContainer.classList.add('hidden');
            playlistSongsContainer.classList.add('hidden');
        });
        
        showPlaylists.addEventListener('click', () => {
            showPlaylists.classList.add('active');
            showSearchResults.classList.remove('active');
            playlistsContainer.classList.remove('hidden');
            searchResults.classList.add('hidden');
            playlistSongsContainer.classList.add('hidden');
        });
        
        backToPlaylists.addEventListener('click', () => {
            playlistSongsContainer.classList.add('hidden');
            playlistsContainer.classList.remove('hidden');
        });
        
        // Add click handlers to playlist items
        document.querySelectorAll('.playlist-item').forEach(item => {
            item.addEventListener('click', () => {
                // Remove active class from all items
                document.querySelectorAll('.playlist-item').forEach(i => i.classList.remove('active'));
                // Add active class to clicked item
                item.classList.add('active');
                
                // Show playlist songs
                playlistsContainer.classList.add('hidden');
                playlistSongsContainer.classList.remove('hidden');
            });
        });
        
        // Add to playlist modal
        addToPlaylistBtn.addEventListener('click', () => {
            if (!currentSong) {
                showNotification("No song selected to add to playlist", "error");
                return;
            }
            addToPlaylistModal.classList.remove('hidden');
        });
        
        closePlaylistModal.addEventListener('click', () => {
            addToPlaylistModal.classList.add('hidden');
        });
        
        confirmAddToPlaylist.addEventListener('click', () => {
            const selectedPlaylist = document.querySelector('input[name="playlist"]:checked');
            const newPlaylistName = document.getElementById('newPlaylistName').value;
            
            if (newPlaylistName) {
                // Create new playlist logic here
                showNotification(`Created new playlist "${newPlaylistName}" and added song`, "success");
            } else if (selectedPlaylist) {
                const playlistName = document.querySelector(`label[for="${selectedPlaylist.id}"]`).textContent;
                showNotification(`Added to playlist "${playlistName}"`, "success");
            } else {
                showNotification("Please select a playlist or create a new one", "error");
                return;
            }
            
            addToPlaylistModal.classList.add('hidden');
        });
        
        // Create playlist modal
        createPlaylistBtn.addEventListener('click', () => {
            createPlaylistModal.classList.remove('hidden');
        });
        
        closeCreateModal.addEventListener('click', () => {
            createPlaylistModal.classList.add('hidden');
        });
        
        confirmCreatePlaylist.addEventListener('click', () => {
            const playlistName = document.getElementById('playlistNameInput').value;
            const playlistDescription = document.getElementById('playlistDescription').value;
            
            if (!playlistName) {
                showNotification("Please enter a playlist name", "error");
                return;
            }
            
            // Create playlist logic here
            showNotification(`Playlist "${playlistName}" created successfully`, "success");
            createPlaylistModal.classList.add('hidden');
            
            // Clear inputs
            document.getElementById('playlistNameInput').value = '';
            document.getElementById('playlistDescription').value = '';
        });
        
        // Functions
        function toggleDarkMode() {
            darkMode = !darkMode;
            if (darkMode) {
                document.documentElement.classList.add('dark');
                localStorage.setItem('darkMode', 'enabled');
            } else {
                document.documentElement.classList.remove('dark');
                localStorage.setItem('darkMode', 'disabled');
            }
        }
        
        // Check for saved dark mode preference
        if (localStorage.getItem('darkMode') === 'enabled') {
            darkModeToggle.checked = true;
            document.documentElement.classList.add('dark');
            darkMode = true;
        }
        
        async function searchMusic() {
            const query = searchInput.value.trim();
            if (!query) return;
            
            // Show loading state
            resultsContainer.innerHTML = `
                <div class="flex justify-center items-center py-10">
                    <div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-white rotate-animation"></div>
                </div>
            `;
            
            // Fold animation
            searchResults.classList.remove('fold-out');
            searchResults.classList.add('fold-in');
            
            setTimeout(async () => {
                try {
                    // Using Spotify API
                    const response = await fetch(`https://apis.davidcyriltech.my.id/search/spotify?text=${encodeURIComponent(query)}`);
                    const data = await response.json();
                    
                    if (data.success && data.result && data.result.length > 0) {
                        displayResults(data.result);
                    } else {
                        resultsContainer.innerHTML = `
                            <div class="text-center py-10">
                                <i class="fas fa-exclamation-circle text-4xl opacity-30 mb-4 float-animation"></i>
                                <p class="opacity-70">No results found for "${query}"</p>
                            </div>
                        `;
                    }
                    
                    // Fold animation
                    searchResults.classList.remove('fold-in');
                    searchResults.classList.add('fold-out');
                } catch (error) {
                    console.error('Error fetching music:', error);
                    resultsContainer.innerHTML = `
                        <div class="text-center py-10">
                            <i class="fas fa-exclamation-triangle text-4xl opacity-30 mb-4 float-animation"></i>
                            <p class="opacity-70">Error loading results. Please try again.</p>
                        </div>
                    `;
                    
                    // Fold animation
                    searchResults.classList.remove('fold-in');
                    searchResults.classList.add('fold-out');
                }
            }, 500);
        }
        
        function displayResults(songs) {
            resultsContainer.innerHTML = '';
            
            songs.forEach((song, index) => {
                const songElement = document.createElement('div');
                songElement.className = 'song-item glass-effect rounded-xl p-4 flex items-center space-x-4 cursor-pointer';
                songElement.innerHTML = `
                    <div class="w-12 h-12 bg-white bg-opacity-10 rounded-lg flex-shrink-0 overflow-hidden dark:bg-black dark:bg-opacity-30">
                        ${song.thumbnail ? `<img src="${song.thumbnail}" class="w-full h-full object-cover">` : 
                          `<div class="w-full h-full flex items-center justify-center">
                            <i class="fas fa-music text-white text-opacity-50"></i>
                          </div>`}
                    </div>
                    <div class="flex-grow">
                        <h3 class="font-medium truncate">${song.trackName}</h3>
                        <p class="text-sm text-white text-opacity-60 truncate">${song.artistName}</p>
                    </div>
                    <div class="text-white text-opacity-60">
                        ${formatDuration(song.duration)}
                    </div>
                `;
                
                songElement.addEventListener('click', () => playSong(song));
                resultsContainer.appendChild(songElement);
                
                // Add delay to each item for staggered animation
                setTimeout(() => {
                    songElement.classList.add('fold-out');
                }, index * 100);
            });
        }
        
        function formatDuration(duration) {
            if (!duration) return "0:00";
            
            // Convert "3:35" or "03:35" format to seconds if needed
            if (typeof duration === 'string' && duration.includes(':')) {
                const [mins, secs] = duration.split(':').map(Number);
                return `${mins}:${secs.toString().padStart(2, '0')}`;
            }
            
            // Assume it's in seconds if it's a number
            const mins = Math.floor(duration / 60);
            const secs = Math.floor(duration % 60);
            return `${mins}:${secs.toString().padStart(2, '0')}`;
        }
        
        async function playSong(song) {
            try {
                // Show loading state in player
                currentSongTitle.textContent = "Loading...";
                currentArtist.textContent = song.artistName;
                currentAlbumArt.src = song.thumbnail || "https://via.placeholder.com/300";
                playPauseBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';
                
                // Fetch song details from Spotify API
                const response = await fetch(`https://apis.davidcyriltech.my.id/spotifydl?url=${encodeURIComponent(song.externalUrl)}`);
                const songData = await response.json();
                
                if (songData.success && songData.DownloadLink) {
                    currentSong = {
                        ...song,
                        preview: songData.DownloadLink,
                        thumbnail: songData.thumbnail
                    };
                    
                    audioPlayer.src = songData.DownloadLink;
                    audioPlayer.play();
                    
                    // Update UI
                    currentSongTitle.textContent = song.trackName;
                    currentArtist.textContent = song.artistName;
                    currentAlbumArt.src = songData.thumbnail || "https://via.placeholder.com/300";
                    playPauseBtn.innerHTML = '<i class="fas fa-pause"></i>';
                    isPlaying = true;
                    
                    // Add pulse effect to player
                    const player = document.querySelector('.floating-player');
                    player.classList.add('pulse');
                    
                    // Add album art animation
                    const albumArt = document.querySelector('.album-art');
                    albumArt.classList.add('float-animation');
                } else {
                    throw new Error("No download link available");
                }
            } catch (error) {
                console.error('Error playing song:', error);
                currentSongTitle.textContent = "Error loading song";
                currentArtist.textContent = "Please try another song";
                playPauseBtn.innerHTML = '<i class="fas fa-play"></i>';
                isPlaying = false;
                
                // Show error notification
                showNotification("Couldn't play this song. Try another one.", "error");
            }
        }
        
        function togglePlayPause() {
            if (!currentSong) return;
            
            if (isPlaying) {
                audioPlayer.pause();
                playPauseBtn.innerHTML = '<i class="fas fa-play"></i>';
                
                // Remove pulse effect when paused
                const player = document.querySelector('.floating-player');
                player.classList.remove('pulse');
            } else {
                audioPlayer.play();
                playPauseBtn.innerHTML = '<i class="fas fa-pause"></i>';
                
                // Add pulse effect when playing
                const player = document.querySelector('.floating-player');
                player.classList.add('pulse');
            }
            
            isPlaying = !isPlaying;
        }
        
        function updateProgress() {
            const { currentTime: ct, duration: dur } = audioPlayer;
            const progressPercent = (ct / dur) * 100;
            progressFill.style.width = `${progressPercent}%`;
            
            // Update time display
            currentTime.textContent = formatTime(ct);
        }
        
        function updateDuration() {
            duration.textContent = formatTime(audioPlayer.duration);
        }
        
        function songEnded() {
            isPlaying = false;
            playPauseBtn.innerHTML = '<i class="fas fa-play"></i>';
            progressFill.style.width = '0%';
            currentTime.textContent = '0:00';
            
            // Remove pulse effect when song ends
            const player = document.querySelector('.floating-player');
            player.classList.remove('pulse');
        }
        
        function formatTime(seconds) {
            if (isNaN(seconds)) return "0:00";
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins}:${secs.toString().padStart(2, '0')}`;
        }
        
        function showNotification(message, type = "info") {
            const notification = document.createElement('div');
            notification.className = `fixed bottom-4 right-4 glass-effect rounded-lg px-6 py-3 flex items-center space-x-3 fold-out ${
                type === "error" ? "bg-red-500 bg-opacity-30" : 
                type === "success" ? "bg-green-500 bg-opacity-30" : "bg-white bg-opacity-20"
            }`;
            notification.innerHTML = `
                <i class="fas ${
                    type === "error" ? "fa-exclamation-triangle" : 
                    type === "success" ? "fa-check-circle" : "fa-info-circle"
                }"></i>
                <span>${message}</span>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.classList.remove('fold-out');
                notification.classList.add('fold-in');
                setTimeout(() => notification.remove(), 500);
            }, 3000);
        }
        
        // Add some demo data on load
        window.addEventListener('DOMContentLoaded', () => {
            // Add animation to album art
            const albumArt = document.querySelector('.album-art');
            setInterval(() => {
                albumArt.classList.toggle('rotate-3d');
            }, 10000);
            
            // Add hover effect to all hover-scale elements
            document.querySelectorAll('.hover-scale').forEach(el => {
                el.addEventListener('mouseenter', () => {
                    el.classList.add('glow-animation');
                });
                el.addEventListener('mouseleave', () => {
                    el.classList.remove('glow-animation');
                });
            });
            
            // Click handlers for recently played songs
            document.querySelectorAll('.song-item').forEach(item => {
                item.addEventListener('click', () => {
                    const title = item.querySelector('h3').textContent;
                    const artist = item.querySelector('p').textContent;
                    const img = item.querySelector('img')?.src;
                    
                    // Simulate playing the song
                    currentSongTitle.textContent = title;
                    currentArtist.textContent = artist;
                    if (img) currentAlbumArt.src = img;
                    
                    // Show notification
                    showNotification(`Now playing: ${title} by ${artist}`, "success");
                });
            });
            
            // Play playlist buttons
            document.querySelectorAll('.playlist-play-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const playlistItem = btn.closest('.playlist-item');
                    const playlistName = playlistItem.querySelector('h3').textContent;
                    
                    // Simulate playing the first song in playlist
                    showNotification(`Playing first song from "${playlistName}"`, "success");
                });
            });
        });


  console.error = (function() {
            const origError = console.error;
            return function() {
                // Filter out specific errors you want to ignore
                const messages = Array.from(arguments).join(' ');
                if (messages.includes('cdn.tailwindcss.com should not be used in production')) {
                    // This is just a warning, we'll use it for development
                    return;
                }
                if (messages.includes('favicon.ico')) {
                    // We're using an emoji favicon, so we can ignore this
                    return;
                }
                origError.apply(console, arguments);
            };
        })();

        // Handle image loading errors
        document.addEventListener('error', function(e) {
            if (e.target.tagName === 'IMG') {
                e.target.src = 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"%3E%3Crect width="100" height="100" fill="%23a777e3"/%3E%3Ctext x="50%" y="50%" font-size="40" text-anchor="middle" dominant-baseline="middle" fill="white"%3EðŸŽµ%3C/text%3E%3C/svg%3E';
                e.target.alt = 'Placeholder album art';
            }
        }, true);

        // API error handling wrapper
        async function safeFetch(url) {
            try {
                const response = await fetch(url);
                if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                return await response.json();
            } catch (error) {
                console.error('API request failed:', error);
                throw error;
            }
        }

        // Mobile player functionality
        const mobilePlayer = document.getElementById('mobilePlayer');
        const mobileAlbumArt = document.getElementById('mobileAlbumArt');
        const mobileSongTitle = document.getElementById('mobileSongTitle');
        const mobileSongArtist = document.getElementById('mobileSongArtist');
        const mobilePlayPauseBtn = document.getElementById('mobilePlayPauseBtn');
        const mobileNextBtn = document.getElementById('mobileNextBtn');

        function updateMobilePlayer(song) {
            if (song) {
                mobileSongTitle.textContent = song.trackName || 'Unknown Track';
                mobileSongArtist.textContent = song.artistName || 'Unknown Artist';
                mobileAlbumArt.src = song.thumbnail || 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"%3E%3Crect width="100" height="100" fill="%23a777e3"/%3E%3Ctext x="50%" y="50%" font-size="40" text-anchor="middle" dominant-baseline="middle" fill="white"%3EðŸŽµ%3C/text%3E%3C/svg%3E';
                mobilePlayer.classList.remove('mobile-hidden');
            } else {
                mobilePlayer.classList.add('mobile-hidden');
            }
        }

        function toggleMobilePlayerVisibility() {
            if (window.innerWidth <= 768) {
                mobilePlayer.classList.remove('mobile-hidden');
            } else {
                mobilePlayer.classList.add('mobile-hidden');
            }
        }

        // Event listeners for mobile controls
        mobilePlayPauseBtn.addEventListener('click', togglePlayPause);
        mobileNextBtn.addEventListener('click', playNext);

        // Update mobile player when song changes
        function playSong(song) {
            // Your existing playSong code...
            updateMobilePlayer(song);
        }

        // Initialize mobile layout
        window.addEventListener('resize', toggleMobilePlayerVisibility);
        toggleMobilePlayerVisibility();

        // Modify your search function to handle errors
        async function searchMusic() {
            const query = searchInput.value.trim();
            if (!query) return;
            
            try {
                const data = await safeFetch(`https://apis.davidcyriltech.my.id/search/spotify?text=${encodeURIComponent(query)}`);
                // Process results...
            } catch (error) {
                showNotification("Search service is currently unavailable. Please try again later.", "error");
                console.error("Search error:", error);
            }
        }

        // Modify your playSong function to handle errors
        async function playSong(song) {
            try {
                // Show loading state
                currentSongTitle.textContent = "Loading...";
                currentArtist.textContent = song.artistName;
                currentAlbumArt.src = song.thumbnail || 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"%3E%3Crect width="100" height="100" fill="%23a777e3"/%3E%3Ctext x="50%" y="50%" font-size="40" text-anchor="middle" dominant-baseline="middle" fill="white"%3EðŸŽµ%3C/text%3E%3C/svg%3E';
                updateMobilePlayer(song);
                
                const songData = await safeFetch(`https://apis.davidcyriltech.my.id/spotifydl?url=${encodeURIComponent(song.externalUrl)}`);
                
                if (songData.success && songData.DownloadLink) {
                    // Success case...
                } else {
                    throw new Error("No download link available");
                }
            } catch (error) {
                console.error('Error playing song:', error);
                showNotification("Couldn't play this song. Try another one.", "error");
                // Fallback to placeholder image
                currentAlbumArt.src = 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"%3E%3Crect width="100" height="100" fill="%23a777e3"/%3E%3Ctext x="50%" y="50%" font-size="40" text-anchor="middle" dominant-baseline="middle" fill="white"%3EðŸŽµ%3C/text%3E%3C/svg%3E';
                updateMobilePlayer(null);
            }
        }
        
    </script>
</body>
</html>
